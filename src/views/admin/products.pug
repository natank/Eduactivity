extends ../templates/container.pug
block content
  h1.text-center.my-4
    | DIY PRINTABLES FOR HOLIDAYS & PARTIES
  a.btn.btn-primary.btn-lg.mx-auto.my-4(href='/admin/createProduct', role='button')
    | Create Product
  form(action='products' ).w-25.mx-auto
    input(type="hidden" name="_csrf" value=csrfToken)
    div.form-group
      label(for="topic") Filter by Topic
      select(name="topic" id="topic").form-control
        option(value='all' selected) ALL PRODUCTS
        each topic in topics
          - const selected = topic.id === filter
          option(value=topic.id selected=selected) #{topic.title.toUpperCase()}
      input(type="submit").btn.btn-primary.mx-auto.d-block.mt-4
  if(products.length)
    .products.my-5
      each product in products
        - let displayMode = gallery;
        - let downloadUrl = `/download/${product._id}`;
        - let { id, editUrl, deleteUrl, imageUrl, title, description, myProduct, price } = product;
        - let itemType = 'product';
        include ../includes/productCard.pug
  else if(filter === undefined) 
    // all topics
    h1.text-center You have no products, create one now !
  else
    h1.text-center No products were found


  include ../includes/footer